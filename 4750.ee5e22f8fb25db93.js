"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4750],{4750:(f,c,a)=>{a.r(c),a.d(c,{FilePickerWeb:()=>m});var u=a(8239),d=a(8384);class m extends d.WebPlugin{constructor(){super(...arguments),this.ERROR_PICK_FILE_CANCELED="pickFiles canceled."}pickFiles(e){var t=this;return(0,u.Z)(function*(){const i=yield t.openFilePicker(e);if(!i)throw new Error(t.ERROR_PICK_FILE_CANCELED);const r={files:[]};for(const n of i){const l={path:void 0,name:t.getNameFromUrl(n),mimeType:t.getMimeTypeFromUrl(n),size:t.getSizeFromUrl(n),blob:n};null!=e&&e.readData&&(l.data=yield t.getDataFromFile(n)),r.files.push(l)}return r})()}openFilePicker(e){var t=this;return(0,u.Z)(function*(){var i;const r=(null===(i=null==e?void 0:e.types)||void 0===i?void 0:i.join(","))||"",n=!(null==e||!e.multiple);return new Promise(l=>{let o=!1;const s=document.createElement("input");s.type="file",s.accept=r,s.multiple=n,s.addEventListener("change",()=>{o=!0;const p=Array.from(s.files||[]);l(p)},{once:!0}),window.addEventListener("focus",(0,u.Z)(function*(){yield t.wait(1e3),!o&&l(void 0)}),{once:!0}),s.click()})})()}getDataFromFile(e){return(0,u.Z)(function*(){return new Promise((t,i)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{const o=("string"==typeof r.result?r.result:"").split("base64,")[1]||"";t(o)},r.onerror=n=>{i(n)}})})()}getNameFromUrl(e){return e.name}getMimeTypeFromUrl(e){return e.type}getSizeFromUrl(e){return e.size}wait(e){return(0,u.Z)(function*(){return new Promise(t=>setTimeout(t,e))})()}}}}]);