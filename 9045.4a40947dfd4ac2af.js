"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9045],{9045:(h,f,c)=>{c.r(f),c.d(f,{CapacitorMuseTrainerMidiWeb:()=>p});var r=c(8239),m=c(8384);class p extends m.WebPlugin{constructor(){super(...arguments),this.midiInputs=[],this.midiOutputs=[],this.access=null}addListener(n,a){var t=this;return(0,r.Z)(function*(){return"deviceChange"===n?(t.access||(yield t.listDevices()),t.access&&(t.access.onstatechange=()=>t.listDevices().then(s=>a(s))),{remove:(s=(0,r.Z)(function*(){t.access&&(t.access.onstatechange=()=>{})}),function(){return s.apply(this,arguments)})}):"commandReceive"===n?(t.midiInputs.forEach(s=>{s.onmidimessage=i=>{const u=i.data[0]>>4;let e=0;i.data.length>1&&(e=i.data[1]);let o=0;i.data.length>2&&(o=i.data[2]),8===u||9===u&&0===o?a({type:"noteOff",dataByte1:e,dataByte2:o}):9===u&&a({type:"noteOn",dataByte1:e,dataByte2:o})}}),{remove:function(){var s=(0,r.Z)(function*(){t.midiInputs.forEach(i=>i.onmidimessage=()=>{})});return function(){return s.apply(this,arguments)}}()}):{remove:function(){var s=(0,r.Z)(function*(){});return function(){return s.apply(this,arguments)}}()};var s})()}sendCommand({command:n,timestamp:a}){var t=this;return(0,r.Z)(function*(){t.midiOutputs.forEach(s=>{s.send(n,a)})})()}listDevices(){var n=this;return(0,r.Z)(function*(){var a,t,s;try{n.access=yield null===(a=navigator.requestMIDIAccess)||void 0===a?void 0:a.call(navigator,{sysex:!0})}catch(e){}if(!n.access)return{devices:[]};const i=[],d=[],l=n.access.inputs.values();for(let e=l.next();!e.done;e=l.next())null!==(t=e.value.name)&&void 0!==t&&t.includes("Midi Through")||i.push(e.value);const u=n.access.outputs.values();for(let e=u.next();!e.done;e=u.next())null!==(s=e.value.name)&&void 0!==s&&s.includes("Midi Through")||d.push(e.value);return n.midiInputs=i,n.midiOutputs=d,{devices:i.map(e=>`${e.manufacturer}`)}})()}}}}]);